From 842e5679b0904a80c7f065ad50417d82af265395 Mon Sep 17 00:00:00 2001
From: vboxsync <vboxsync@cfe28804-0f27-0410-a406-dd0f0b0b656f>
Date: Wed, 29 Jul 2020 11:01:45 +0000
Subject: [PATCH] IPRT/the-linux-kernel.h: Need header for __flush_tlb_all()
 now. bugref:9801

git-svn-id: http://www.virtualbox.org/svn/vbox@85518 cfe28804-0f27-0410-a406-dd0f0b0b656f
---
 trunk/src/VBox/Runtime/r0drv/linux/the-linux-kernel.h | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/trunk/src/VBox/Runtime/r0drv/linux/the-linux-kernel.h b/trunk/src/VBox/Runtime/r0drv/linux/the-linux-kernel.h
index 9b77283e1c..0142035c41 100644
--- a/trunk/src/VBox/Runtime/r0drv/linux/the-linux-kernel.h
+++ b/trunk/src/VBox/Runtime/r0drv/linux/the-linux-kernel.h
@@ -176,6 +176,11 @@
 # include <asm/set_memory.h>
 #endif
 
+/* for __flush_tlb_all() */
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(2, 6, 28) && (defined(RT_ARCH_AMD64) || defined(RT_ARCH_X86))
+# include <asm/tlbflush.h>
+#endif
+
 #if LINUX_VERSION_CODE >= KERNEL_VERSION(3, 7, 0)
 # include <asm/smap.h>
 #else
